<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/global/elementos-globais/index.css">
    <link rel="stylesheet" href="assets/css/global/elementos-globais/aside-nav-config/index.css">
    <link rel="stylesheet" href="assets/css/pages/tela-fotografo-config-detalhes-da-empresa/index.css">
    <link rel="stylesheet" href="assets/css/pages/tela-fotografo-config-detalhes-da-empresa-categoria/index.css">
</head>

<body>
    <header class="header-fixo">
        <div class="header-fixo__logo">
            <img src="assets/img/page/index/logo-section-1.png" alt="">
        </div>

        <!-- botão/ícone de pesquisa -->
        <button class="header-fixo__search-btn">
            <img src="assets/img/page/index/search_wght400.svg" alt="">
        </button>

        <!-- botão fechar -->
        <button class="header-fixo__close-btn">✖</button>

        <div class="header-fixo__input">
            <input type="text" placeholder="Categoria">
            <input type="text" placeholder="Onde">
            <input type="datetime-local" placeholder="Quando">
        </div>

        <div class="header-fixo__login-fot-user">
            <input class="header-fixo__login-fot-user__input openModal__cadastro-fotografo" type="button"
                value="Adicione o seu portifolho">
            <img class="section__div_user" src="./assets/img/page/index/person-wght400.svg" alt="">
            <a class="section__div-topo_a" href="">Entrar/Cadastrar</a>
        </div>
    </header>


    <div class="container-flex">
        <aside class="container-flex__menu-config">
            <div class="menu-config__info-user none">
                <img src="assets/img/page/aside-nav-config/account_circle_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.svg"
                    alt="">
                <div class="menu-config__name-telefone">
                    <h2>Usuario</h2>
                    <p>(11) 78493-0166</p>
                </div>
            </div>

            <div class="menu-config__item">
                <div>
                    <img class="item__icon-action"
                        src="assets/img/page/aside-nav-config/calendar_month_24dp_000000_FILL0_wght400_GRAD0_opsz24 (1).svg"
                        alt="">
                    <p>Agendamentos</p>
                </div>
            </div>

            <div class="menu-config__item">
                <div>
                    <img class="item__icon-action"
                        src="assets/img/page/aside-nav-config/settings_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                        alt="">
                    <p>Configurações da empresa</p>
                </div>
                <img src="assets/img/page/aside-nav-config/arrow_forward_ios_24dp_1F1F1F_FILL0_wght400_GRAD0_opsz24.svg"
                    alt="" class="item__icon-next">
            </div>

            <div class="menu-config__item none">
                <div>
                    <p>Adicionar serviço</p>
                </div>
            </div>

            <div class="menu-config__item none">
                <div>
                    <p>Detalhes da empresa</p>
                </div>
            </div>

            <div class="menu-config__item">
                <div>
                    <img class="item__icon-action"
                        src="assets/img/page/tela-fotografo-config-agendamento/check_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                        alt="">
                    <p>Cheakouts</p>
                </div>
            </div>

            <div class="menu-config__item">
                <div>
                    <img class="item__icon-action"
                        src="assets/img/page/aside-nav-config/exit_to_app_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                        alt="">
                    <p>Sair</p>
                </div>
            </div>
        </aside>














        <section class="container-flex__detalhes-da-empresa-section">
            <div class="detalhes-da-empresa-section__title">
                <img src="assets/img/page/aside-nav-config/settings_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg" alt="">
                <h2>Configurações da empresa</h2>
            </div>

            <div class="detalhes-da-empresa-section__categoria">
                <h3>Detalhes da empresa</h3>
                <h4>Categoria</h4>
                <form id="empresaForm" class="categoria__container">
                    <h4>Categoria</h4>
                    <div class="input-wrapper">
                        <input type="text" id="categoriaPrincipal" name="categoria_principal"
                            placeholder="Categoria principal">
                        <span class="seta">›</span>
                    </div>
                    <h4>Categoria adicionais</h4>
                    <div class="input-wrapper">
                        <input type="text" id="inputSubcategoria" placeholder="Fotografia infantil">
                        <span class="seta">›</span>
                    </div>
                    <button type="button" id="addSubcategoria" class="btn-adicionar">Adicionar</button>
                    <h4>Tags de Categoria adicionais</h4>
                    <div id="listaSubcategorias"></div>
                    <button type="submit" class="btn-salvar">Salvar</button>
                </form>
            </div>
        </section>

    </div>

    <script>
        // Seleciona o card de configurações
        const configCard = document.querySelector('.menu-config__item:nth-of-type(3)');

        // Seleciona os itens que inicialmente têm a classe 'none'
        const hiddenItems = document.querySelectorAll('.menu-config__item.none');

        // Seleciona o ícone de seta dentro do card de configurações
        const arrowIcon = configCard.querySelector('.item__icon-next');

        // Adiciona o evento de clique
        configCard.addEventListener('click', () => {
            hiddenItems.forEach(item => item.classList.toggle('none')); // alterna a classe 'none'
            arrowIcon.classList.toggle('rotated'); // alterna a rotação do ícone
        });
    </script>
    <script>
        const form = document.getElementById('empresaForm');
        const inputSub = document.getElementById('inputSubcategoria');
        const listaSub = document.getElementById('listaSubcategorias');
        const btnAdd = document.getElementById('addSubcategoria');

        let subcategorias = [];

        // Adicionar subcategoria dinamicamente
        btnAdd.addEventListener('click', () => {
            const valor = inputSub.value.trim();
            if (valor && !subcategorias.includes(valor)) {
                subcategorias.push(valor);

                const tag = document.createElement('div');
                tag.classList.add('tag');
                tag.innerHTML = `${valor} <button type="button" class="remove">×</button>`;
                listaSub.appendChild(tag);

                tag.querySelector('.remove').addEventListener('click', () => {
                    subcategorias = subcategorias.filter(item => item !== valor);
                    tag.remove();
                });

                inputSub.value = '';
            }
        });

        // Envio para o backend (PHP)
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const dados = {
                categoria_principal: document.getElementById('categoriaPrincipal').value,
                subcategorias: subcategorias
            };

            console.log("Enviando para o backend:", dados);

            const response = await fetch('salvar_empresa.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            });

            if (response.ok) {
                alert('Dados salvos com sucesso!');
            } else {
                alert('Erro ao salvar!');
            }
        });
    </script>


</body>

</html>