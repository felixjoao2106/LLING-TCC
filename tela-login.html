<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/pages/tela-cadastro-fotografo/index.css">

</head>

<body>
    <div class="modal-overlay" id="modal__cadastro-fotografo">
        <section class="section-cadastro-fotografo">
            <button class="section-cadastro-fotografo__modal-close" id="closeModal__cadastro-fotografo">&times;</button>

            <div class="section-cadastro-fotografo__div-title">
                <h1>Crie uma conta</h1>
                <p>Faça o cadastro e, tenha uma plataforma inteira de visibilidade</p>
            </div>

            <div class="section-cadastro-fotografo__div-input">
                <form action="cadastro.php" method="POST">
                    <!-- E-mail -->
                    <div class="div-input__e-mail">
                        <label for="input-email__cadastro-fotografo"><strong>E-mail</strong></label>
                        <input type="email" id="input-email__cadastro-fotografo" name="email" placeholder="E-mail"
                            required>
                        <hr>
                    </div>

                    <!-- Sobre você -->
                    <div class="div-input__sobre-voce">
                        <sapn><strong>Sobre você</strong></sapn>
                        <label for="input-empresa__cadastro-fotografo">Nome da empresa</label>
                        <input type="text" id="input-empresa__cadastro-fotografo" name="empresa"
                            placeholder="Nome da empresa" required>

                        <label for="input-nome__cadastro-fotografo">Nome completo</label>
                        <input type="text" id="input-nome__cadastro-fotografo" name="nome" placeholder="Nome completo"
                            required>

                        <label for="input-telefone__cadastro-fotografo">Telefone</label>
                        <input type="tel" id="input-telefone__cadastro-fotografo" name="telefone" placeholder="Telefone"
                            required>
                        <hr>
                    </div>

                    <!-- Senha -->
                    <div class="div-input__senha">
                        <label for="input-senha__cadastro-fotografo"><strong>Senha</strong></label>
                        <input type="password" id="input-senha__cadastro-fotografo" name="senha" placeholder="Senha"
                            required>
                        <hr>
                    </div>

                    <div class="div-input__imagem-local">
                        <label for="input-imagem__cadastro-fotografo"><strong>
                            Adicione seu local de trabalho
                                (Opcional)
                        </strong></label>

                        <!-- Input escondido -->
                        <input type="file" id="input-imagem__cadastro-fotografo" accept="image/*"
                            style="display: none;">

                        <!-- Área clicável -->
                        <div id="preview__cadastro-fotografo" class="imagem-local__upload-box"
                            onclick="document.getElementById('input-imagem__cadastro-fotografo').click()" role="button"
                            tabindex="0" aria-label="Adicionar imagem do local de trabalho">
                            <img src="assets/img/page/tela-cadastro-fotografo/photo_camera_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                alt="ícone câmera" id="icone-camera__cadastro-fotografo"
                                style="width: 36px; opacity: 0.7;">
                            <p>
                                Adicione uma foto do seu local de trabalho.<br>
                                <span>Opcional, mas altamente recomendado. Mostre aos clientes o que você faz.</span>
                            </p>
                        </div>
                        <hr>
                    </div>

                    <!-- Localização completa -->
                    <div class="div-input__localizacao">
                        <!-- CEP -->
                        <label><strong>Localização</strong></label>
                        <label for="input-cep__cadastro-fotografo">CEP</label>
                        <div style="position: relative;">
                            <input type="text" id="input-cep__cadastro-fotografo" name="cep" placeholder="Digite o CEP"
                                maxlength="10">
                            <span
                                style="position: absolute; top: 55%; right: 12px; transform: translateY(-50%); cursor: pointer;">
                                <img src="assets/img/page/tela-cadastro-fotografo/search_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                    alt="Buscar" style="width: 20px;">
                            </span>
                        </div>

                        <!-- Rua / Endereço -->
                        <label for="input-endereco__cadastro-fotografo">Rua</label>
                        <input type="text" id="input-endereco__cadastro-fotografo" name="endereco" placeholder="Rua"
                            readonly>

                        <!-- Número -->
                        <label for="input-numero__cadastro-fotografo">Número</label>
                        <input type="text" id="input-numero__cadastro-fotografo" name="numero"
                            placeholder="Número do endereço">

                        <!-- Bairro -->
                        <label for="input-bairro__cadastro-fotografo">Bairro</label>
                        <input type="text" id="input-bairro__cadastro-fotografo" name="bairro" placeholder="Bairro"
                            readonly>

                        <!-- Cidade -->
                        <label for="input-cidade__cadastro-fotografo">Cidade</label>
                        <input type="text" id="input-cidade__cadastro-fotografo" name="cidade" placeholder="Cidade"
                            readonly>

                        <!-- Estado -->
                        <label for="input-estado__cadastro-fotografo">Estado</label>
                        <input type="text" id="input-estado__cadastro-fotografo" name="estado" placeholder="Estado"
                            readonly>

                        <!-- Complemento -->
                        <label for="input-complemento__cadastro-fotografo">Complemento</label>
                        <input type="text" id="input-complemento__cadastro-fotografo" name="complemento"
                            placeholder="Complemento">
                        <hr>
                    </div>


                    <!-- Tipo de ensaio -->
                    <div class="div-input__tipo-ensaio">
                        <label for="input-ensaio__cadastro-fotografo"><strong>Seu tipo de ensaio</strong></label>
                        <select id="input-ensaio__cadastro-fotografo" name="tipo_ensaio" required>
                            <option value="" disabled selected>Escolha</option>
                            <option value="casamento">Casamento</option>
                            <option value="gestante">Gestante</option>
                            <option value="infantil">Infantil</option>
                            <option value="família">Família</option>
                            <option value="ensaio-externo">Ensaio Externo</option>
                            <option value="studio">Estúdio</option>
                            <option value="outro">Outro</option>
                        </select>
                        <hr>
                    </div>


                    <div class="div-input__horarios-container">
                        <label><strong>Horários de funcionamento</strong></label>

                        <!-- Segunda -->
                        <div class="horarios-container__dia" data-dia="Segunda" data-horario="09:00-18:00">
                            <span class="dia__dia-nome">Segunda</span>
                            <span class="dia__dia-horario">09:00-18:00</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="segunda_status" checked>
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="segunda_horario" value="09:00-18:00">
                        </div>

                        <!-- Terça -->
                        <div class="horarios-container__dia" data-dia="Terça" data-horario="09:00-18:00">
                            <span class="dia__dia-nome">Terça</span>
                            <span class="dia__dia-horario">09:00-18:00</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="terca_status" checked>
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="terca_horario" value="09:00-18:00">
                        </div>

                        <!-- Quarta -->
                        <div class="horarios-container__dia" data-dia="Quarta" data-horario="09:00-18:00">
                            <span class="dia__dia-nome">Quarta</span>
                            <span class="dia__dia-horario">09:00-18:00</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="quarta_status" checked>
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="quarta_horario" value="09:00-18:00">
                        </div>

                        <!-- Quinta -->
                        <div class="horarios-container__dia" data-dia="Quinta" data-horario="09:00-18:00">
                            <span class="dia__dia-nome">Quinta</span>
                            <span class="dia__dia-horario">09:00-18:00</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="quinta_status" checked>
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="quinta_horario" value="09:00-18:00">
                        </div>

                        <!-- Sexta -->
                        <div class="horarios-container__dia" data-dia="Sexta" data-horario="09:00-18:00">
                            <span class="dia__dia-nome">Sexta</span>
                            <span class="dia__dia-horario">09:00-18:00</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="sexta_status" checked>
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="sexta_horario" value="09:00-18:00">
                        </div>

                        <!-- Sábado -->
                        <div class="horarios-container__dia" data-dia="Sábado" data-horario="Fechado">
                            <span class="dia__dia-nome">Sábado</span>
                            <span class="dia__dia-horario">Fechado</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="sabado_status">
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config disabled">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="sabado_horario" value="Fechado">
                        </div>

                        <!-- Domingo -->
                        <div class="horarios-container__dia" data-dia="Domingo" data-horario="Fechado">
                            <span class="dia__dia-nome">Domingo</span>
                            <span class="dia__dia-horario">Fechado</span>
                            <div class="dia__acoes">
                                <label class="acoes__switch">
                                    <input type="checkbox" name="domingo_status">
                                    <span class="switch__slider"></span>
                                </label>
                                <button type="button" class="acoes__btn-config disabled">
                                    <img src="assets/img/page/tela-cadastro-fotografo/keyboard_arrow_right_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg"
                                        alt="">
                                </button>
                            </div>
                            <input type="hidden" name="domingo_horario" value="Fechado">
                        </div>
                        <hr>
                    </div>

                    <!-- Modal de configuração do horário -->
                    <div id="modal-horario__cadastro-fotografo" class="div-input__modal-overlay" style="display:none;">
                        <div class="modal-overlay__div-config-time">
                            <button class="div-config-time__modal-close">&times;</button>
                            <div class="div-config-time__div-title">
                                <h3>Configurar Horário</h3>
                                <p id="modal-dia-nome__cadastro-fotografo"></p>
                            </div>
                            <div>
                                <label for="hora-inicio__cadastro-fotografo">Hora de início</label>
                                <input type="time" id="hora-inicio__cadastro-fotografo">
                                <label for="hora-fim__cadastro-fotografo">Hora de fim</label>
                                <input type="time" id="hora-fim__cadastro-fotografo">
                                <button id="salvar-horario__cadastro-fotografo">Salvar</button>
                            </div>
                        </div>
                    </div>

                    <div class="div-input__adicionar-ensaio">
                        <!-- Nome do Ensaio -->
                        <div class="adicionar-ensaio__nome-ensaio">
                            <label for="input-nome-ensaio__cadastro-fotografo">Nome do Ensaio</label>
                            <input type="text" id="input-nome-ensaio__cadastro-fotografo" name="nome_ensaio"
                                placeholder="Digite o nome do ensaio" required>
                        </div>

                        <!-- Duração -->
                        <div class="adicionar-ensaio__duracao">
                            <label for="select-horas__cadastro-fotografo">Duração</label>
                            <div class="duracao__duracao-container">
                                <!-- Horas -->
                                <select id="select-horas__cadastro-fotografo" name="horas" required>
                                    <option value="0">0 h</option>
                                    <option value="1">1 h</option>
                                    <option value="2">2 h</option>
                                    <option value="3">3 h</option>
                                    <option value="4">4 h</option>
                                    <option value="5">5 h</option>
                                    <option value="6">6 h</option>
                                    <option value="7">7 h</option>
                                    <option value="8">8 h</option>
                                    <option value="9">9 h</option>
                                    <option value="10">10 h</option>
                                    <option value="11">11 h</option>
                                    <option value="12">12 h</option>
                                </select>

                                <span>:</span>

                                <!-- Minutos -->
                                <select id="select-minutos__cadastro-fotografo" name="minutos" required>
                                    <option value="0">00 min</option>
                                    <option value="5">05 min</option>
                                    <option value="10">10 min</option>
                                    <option value="15">15 min</option>
                                    <option value="20">20 min</option>
                                    <option value="25">25 min</option>
                                    <option value="30">30 min</option>
                                    <option value="35">35 min</option>
                                    <option value="40">40 min</option>
                                    <option value="45">45 min</option>
                                    <option value="50">50 min</option>
                                    <option value="55">55 min</option>
                                </select>
                            </div>
                        </div>


                        <!-- Preço -->
                        <div class="adicionar-ensaio__preco">
                            <label for="input-preco__cadastro-fotografo">Preço</label>
                            <div class="preco__preco-wrapper">
                                <span class="preco-wrapper__preco-simbolo">R$</span>
                                <input type="text" id="input-preco__cadastro-fotografo" name="preco" placeholder="0,00"
                                    inputmode="numeric" required>
                            </div>
                        </div>

                    </div>



                    <div class="div-input__div-button">
                        <input type="submit" value="Cadastrar-se">
                        <p>Já tenho uma conta</p>
                    </div>
                </form>
            </div>
        </section>
    </div>

    <script>
        // Imagem do local de trabalho
        const inputImagem = document.getElementById('input-imagem__cadastro-fotografo');
        const preview = document.getElementById('preview__cadastro-fotografo');

        // Salva o HTML inicial do preview para restaurar depois
        const initialPreviewHTML = preview.innerHTML;

        // Abrir filepicker por teclado também
        preview.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                inputImagem.click();
            }
        });

        // Quando escolher arquivo
        inputImagem.addEventListener('change', function () {
            if (this.files && this.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.innerHTML = `
                <button type="button" class="remove-btn" aria-label="Remover imagem">&times;</button>
                <img class="preview-img" src="${e.target.result}" alt="Preview da imagem">
            `;

                    const btn = preview.querySelector('.remove-btn');
                    btn.addEventListener('click', removerImagem);
                };
                reader.readAsDataURL(this.files[0]);
            }
        });

        function removerImagem(event) {
            event.stopPropagation();
            inputImagem.value = '';
            preview.innerHTML = initialPreviewHTML;

            preview.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    inputImagem.click();
                }
            });
        }

        // Busca CEP
        document.getElementById('input-cep__cadastro-fotografo').addEventListener('blur', function () {
            const cep = this.value.replace(/\D/g, '');
            if (cep.length !== 8) {
                alert('CEP inválido! Um CEP tem 8 números.');
                return;
            }

            fetch(`https://viacep.com.br/ws/${cep}/json/`)
                .then(response => response.json())
                .then(data => {
                    if (data.erro) {
                        alert('CEP não encontrado!');
                        return;
                    }

                    document.getElementById('input-endereco__cadastro-fotografo').value = data.logradouro || '';
                    document.getElementById('input-bairro__cadastro-fotografo').value = data.bairro || '';
                    document.getElementById('input-cidade__cadastro-fotografo').value = data.localidade || '';
                    document.getElementById('input-estado__cadastro-fotografo').value = data.uf || '';
                })
                .catch(error => {
                    console.error('Erro ao buscar CEP:', error);
                });
        });

        // Modal de horário
        const modalHorario = document.getElementById('modal-horario__cadastro-fotografo');
        const closeBtnHorario = modalHorario.querySelector('.div-config-time__modal-close');
        const modalDiaNome = document.getElementById('modal-dia-nome__cadastro-fotografo');
        const horaInicioInput = document.getElementById('hora-inicio__cadastro-fotografo');
        const horaFimInput = document.getElementById('hora-fim__cadastro-fotografo');
        const salvarHorarioBtn = document.getElementById('salvar-horario__cadastro-fotografo');

        let diaAtual = null;

        // Botões de configuração
        document.querySelectorAll('.horarios-container__dia .acoes__btn-config').forEach(btn => {
            btn.addEventListener('click', () => {
                const dia = btn.closest('.horarios-container__dia');
                const checkbox = dia.querySelector('input[type="checkbox"]');
                if (!checkbox.checked) return;

                diaAtual = dia;
                modalDiaNome.textContent = dia.dataset.dia;

                let horario = dia.dataset.horario;
                if (horario !== 'Fechado') {
                    let partes = horario.split('-');
                    horaInicioInput.value = partes[0];
                    horaFimInput.value = partes[1];
                } else {
                    horaInicioInput.value = '09:00';
                    horaFimInput.value = '18:00';
                }

                modalHorario.style.display = 'flex';
            });
        });

        // Fechar modal
        closeBtnHorario.addEventListener('click', () => {
            modalHorario.style.display = 'none';
        });

        // Salvar horário
        salvarHorarioBtn.addEventListener('click', () => {
            const novoHorario = `${horaInicioInput.value}-${horaFimInput.value}`;
            const checkbox = diaAtual.querySelector('input[type="checkbox"]');
            const statusSpan = diaAtual.querySelector('.dia__dia-horario');
            const hiddenInput = diaAtual.querySelector('input[type="hidden"]');

            statusSpan.textContent = checkbox.checked ? novoHorario : 'Fechado';
            if (hiddenInput) hiddenInput.value = checkbox.checked ? novoHorario : 'Fechado';

            diaAtual.dataset.horario = checkbox.checked ? novoHorario : 'Fechado';
            modalHorario.style.display = 'none';
        });


        // Atualiza status quando o switch muda
        document.querySelectorAll('.horarios-container__dia input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const dia = checkbox.closest('.horarios-container__dia');
                const statusSpan = dia.querySelector('.dia__dia-horario');
                const btnConfig = dia.querySelector('.acoes__btn-config');
                const hiddenInput = dia.querySelector('input[type="hidden"]');

                if (checkbox.checked) {
                    const horario = dia.dataset.horario !== 'Fechado' ? dia.dataset.horario : '09:00-18:00';
                    statusSpan.textContent = horario;
                    if (hiddenInput) hiddenInput.value = horario;
                    btnConfig.classList.remove('disabled');
                } else {
                    statusSpan.textContent = 'Fechado';
                    if (hiddenInput) hiddenInput.value = 'Fechado';
                    btnConfig.classList.add('disabled');
                }
            });
        });

        // Formato do preço
        const inputPreco = document.getElementById("input-preco__cadastro-fotografo");

        inputPreco.addEventListener("input", (e) => {
            let value = e.target.value.replace(/\D/g, ""); // remove tudo que não é número
            value = (parseInt(value || "0", 10) / 100).toFixed(2); // converte para reais
            value = new Intl.NumberFormat("pt-BR", {
                style: "currency",
                currency: "BRL"
            }).format(value);

            e.target.value = value.replace("R$", "").trim(); // remove R$ se você já tem no span
        });
    </script>





</body>

</html>